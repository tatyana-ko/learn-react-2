# Задача 4: Исправление проблемы мерцания темы

## Теория, которую нужно изучить:
- React Context API и оптимизация контекста
- Мемоизация значений в React
- Ререндеринг компонентов и его причины

## Проблема:
В приложении есть проблема производительности: при каждом изменении темы происходит ререндер всех компонентов, даже тех, которые не используют значение темы напрямую. Это приводит к заметному мерцанию интерфейса.

## Требования к решению:
1. Предотвратить ненужные ререндеры компонентов
2. Сохранить всю существующую функциональность переключения темы
3. Оптимизировать работу с контекстом

## Ограничения:
- Нельзя менять структуру провайдера
- Можно разделять контекст на несколько частей
- Нельзя использовать внешние библиотеки
- Нужно использовать React.memo где это необходимо

## Как начать работу:
1. Установите зависимости:
```bash
npm install
```

2. Запустите проект:
```bash
npm run dev
```

3. Откройте файл `src/context/ThemeContext.tsx` и оптимизируйте работу с контекстом.
4. Используйте React DevTools и консоль для отслеживания ререндеров.

## Подсказки по реализации:

1. Проблема в создании нового объекта контекста при каждом рендере:
```tsx
// Проблемный код
const value = { theme, setTheme }; // Новый объект при каждом рендере
```

2. Можно использовать useMemo для мемоизации значения контекста:
```tsx
const value = useMemo(() => ({
  // ...
}), [/* dependencies */]);
```

## Проверка результата:
Ваше решение должно:
- Устранить мерцание интерфейса
- Уменьшить количество ререндеров (проверяется через React DevTools)
- Сохранить возможность переключения темы

## Полезные материалы:
- [React Context Optimization](https://react.dev/reference/react/useContext#optimizing-re-renders-when-passing-objects-and-functions)
- [useMemo Documentation](https://react.dev/reference/react/useMemo)
