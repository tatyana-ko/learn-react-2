# Product Configuration Manager

## Бизнес-контекст
Вы разрабатываете интерфейс настройки продукта для платформы электронной коммерции. Пользователи могут настраивать различные аспекты продукта, включая цветовые схемы, функции и дополнительные опции. Конфигурация имеет несколько вложенных уровней, и изменения должны отслеживаться для обеспечения предварительного просмотра и функции отмены.

## Задача
Реализовать компонент конфигуратора продукта с использованием сложного состояния и управления изменениями.

## Подготовка к работе
1. Установите зависимости:
```bash
npm install
```

2. Запустите проект:
```bash
npm run dev
```

3. Откройте в браузере:
```
http://localhost:5173
```

4. Для запуска тестов:
```bash
npm test
```

## Требования

### Функциональные требования:
1. Управление базовыми настройками:
   - Выбор цвета
   - Выбор размера
   - Выбор материала

2. Управление функциями:
   - Включение/выключение функций
   - Настройка уровня функции (basic/premium)
   - Дополнительные настройки для каждой функции

3. Управление дополнениями:
   - Добавление/удаление дополнений
   - Настройка количества
   - Кастомизация дополнений (цвет, текст)

4. История изменений:
   - Отслеживание последних 5 изменений
   - Возможность отмены изменений
   - Группировка связанных изменений

### Технические требования:
1. Управление состоянием:
   - Использование иммутабельных обновлений
   - Корректная обработка вложенных изменений
   - Эффективные паттерны обновления состояния

2. Типизация:
   - Полная типизация всех props и state
   - Типизация функций обновления
   - Корректная обработка null и undefined

3. Валидация:
   - Проверка зависимостей функций
   - Валидация количества дополнений
   - Проверка корректности данных

## Процесс проверки

### Автоматическая проверка (70%)
Запустите тесты:
```bash
npm test
```

Все тесты должны проходить успешно. Тесты проверяют:
- Корректность обновления состояния
- Работу истории изменений
- Валидацию конфигурации
- Обработку пользовательского ввода
- Типизацию компонентов

### Ручная проверка ментором (30%)
1. Качество кода:
   - [ ] Понятная структура компонента
   - [ ] Эффективные паттерны обновления
   - [ ] Обработка ошибок
   - [ ] Комментарии и документация

2. Производительность:
   - [ ] Оптимизация рендеринга
   - [ ] Эффективность обновлений
   - [ ] Управление памятью

3. Пользовательский опыт:
   - [ ] Понятный интерфейс
   - [ ] Мгновенная обратная связь
   - [ ] Информативные сообщения об ошибках

## Файлы для решения
- `src/components/ProductConfigurator.tsx` - Основной компонент для реализации
- `src/types/ProductConfig.ts` - Типы данных
- `src/components/__tests__/ProductConfigurator.test.tsx` - Тесты

## Полезные материалы
- [React State Management](https://react.dev/learn/managing-state)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [Testing Library](https://testing-library.com/docs/react-testing-library/intro/)

## Полезные материалы для изучения

### Архитектура состояния
1. [Выбор структуры состояния](https://react.dev/learn/choosing-the-state-structure)
   - Нормализация данных
   - Атомарное состояние
   - Группировка связанных данных
   - Избегание дублирования
   - Кэширование вычислений

2. [Управление сложным состоянием](https://react.dev/learn/managing-state)
   - Декомпозиция состояния
   - Производные данные
   - Обработка побочных эффектов
   - Синхронизация состояний
   - Обработка конфликтов

### Компоненты выбора
1. [React Select Component](https://react.dev/reference/react-dom/components/select)
   - Одиночный выбор
   - Множественный выбор
   - Группировка опций
   - Кастомизация отображения
   - Асинхронная загрузка опций

2. [React Radio и Checkbox](https://react.dev/reference/react-dom/components/input)
   - Группы выбора
   - Управление состоянием групп
   - Условный рендеринг
   - Доступность групп выбора
   - Стилизация компонентов

### Продвинутое управление состоянием
1. [useReducer Hook](https://react.dev/reference/react/useReducer)
   - Моделирование сложных обновлений
   - Типизация действий
   - Композиция редьюсеров
   - Мемоизация селекторов
   - Оптимизация обновлений

2. [React Context](https://react.dev/learn/passing-data-deeply-with-context)
   - Создание провайдеров
   - Потребление контекста
   - Оптимизация контекста
   - Композиция контекстов
   - Динамический контекст

### Паттерны проектирования
1. [Компонентные паттерны](https://www.patterns.dev/react)
   - Составные компоненты
   - Компоненты высшего порядка
   - Render Props
   - Инверсия контроля
   - Адаптивные компоненты

2. [Паттерны состояния](https://redux.js.org/style-guide/style-guide)
   - Единый источник правды
   - Иммутабельные обновления
   - Селекторы
   - Нормализация данных
   - Кэширование

### Оптимизация производительности
1. [Профилирование и оптимизация](https://react.dev/learn/render-and-commit)
   - Анализ ререндеров
   - Мемоизация компонентов
   - Виртуализация списков
   - Ленивая загрузка
   - Оптимизация вычислений

2. [React DevTools](https://react.dev/learn/react-developer-tools)
   - Профилирование компонентов
   - Анализ дерева компонентов
   - Отладка состояния
   - Поиск проблем производительности
   - Временная шкала рендеринга

### Тестирование
1. [Тестирование компонентов](https://testing-library.com/docs/react-testing-library/intro/)
   - Модульные тесты
   - Интеграционные тесты
   - Тестирование событий
   - Асинхронное тестирование
   - Снэпшот тестирование

2. [Тестирование состояния](https://testing-library.com/docs/react-testing-library/example-intro/)
   - Тестирование редьюсеров
   - Тестирование селекторов
   - Моки и стабы
   - Тестирование побочных эффектов
   - Тестирование производительности

### Дополнительные инструменты
1. [Immer](https://immerjs.github.io/immer/)
   - Иммутабельные обновления
   - Патчи и откаты
   - Оптимизация памяти
   - Интеграция с TypeScript
   - Отладка изменений

2. [Redux Toolkit](https://redux-toolkit.js.org/)
   - Управление глобальным состоянием
   - Слайсы состояния
   - Асинхронные действия
   - Мемоизация селекторов
   - Инструменты разработчика

3. [MobX](https://mobx.js.org/README.html)
   - Реактивное программирование
   - Наблюдаемые состояния
   - Автоматические вычисления
   - Транзакции
   - Интеграция с React

### Дополнительные концепции
1. [Finite State Machines](https://xstate.js.org/docs/)
   - Моделирование состояний
   - Переходы состояний
   - Параллельные состояния
   - Вложенные состояния
   - Визуализация состояний

2. [Event Sourcing](https://redux.js.org/understanding/thinking-in-redux/three-principles)
   - Журналирование действий
   - Воспроизведение состояний
   - Отмена/повтор действий
   - Отладка состояний
   - Сохранение истории

## Необходимая теория

### Компоненты выбора
1. [Select и Radio компоненты](https://react.dev/reference/react-dom/components/select)
   - Управление значением
   - Обработка изменений
   - Группировка опций
   - Disabled состояния

### Управление состоянием
1. [Структура состояния](https://react.dev/learn/managing-state)
   - Организация сложных объектов
   - Обновление вложенных данных
   - Зависимые состояния
   - Вычисляемые значения

### Условный рендеринг
1. [Динамический UI](https://react.dev/learn/conditional-rendering)
   - Условное отображение
   - Списки опций
   - Зависимый контент
   - Обработка ошибок

### TypeScript
1. [Типизация компонентов](https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example)
   - Props интерфейсы
   - Типы событий
   - Enum для опций
   - Union types

*Дополнительно*
- [React Select](https://react-select.com/home) - продвинутый компонент выбора
- [Zod](https://zod.dev/) - валидация конфигураций
